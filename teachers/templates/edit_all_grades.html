{% extends 'base.html' %}
{% block title %}ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨{% endblock %}
{% load tags %}
{% block content %}
<h2>ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨: {{ student.name }}</h2>

<form method="POST">
    {% csrf_token %}
    <table class="grades-table">
        <thead>
            <tr>
                <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
                {% for month in months %}
                    <th>{{ month.name }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for subject in subjects %}
                <tr>
                    <td>{{ subject.name }}</td>
                    {% for month in months %}
                        {% with key=subject.id|stringformat:"s"|add:"_"|add:month.id|stringformat:"s" %}
                            <td>
                                {% with key=subject.id|stringformat:"s"|add:"_"|add:month.id|stringformat:"s" %}
                                    <input 
                                        type="number"
                                        name="grade_{{ key }}"
                                        value="{{ grade_dict|get_item:key|default_if_none:'' }}"
                                    >
                                {% endwith %}
                            </td>
                        {% endwith %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="form-actions" style="margin-top:20px;">
        <button type="submit" class="btn btn-primary">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
        <a href="{% url 'teacher_login' %}" class="btn btn-secondary">Ø¥Ù„ØºØ§Ø¡</a>
    </div>
</form>

<style>
.grades-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1em;
    text-align: center;
}
.grades-table th, .grades-table td {
    border: 1px solid #ddd;
    padding: 6px;
}
.grades-table th {
    background-color: #f5f5f5;
}
input[type="number"] {
    width: 70px;
    text-align: center;
}
</style>
{% endblock %}
